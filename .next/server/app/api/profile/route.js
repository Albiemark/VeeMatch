"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profile/route";
exports.ids = ["app/api/profile/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_albie_Documents_GitHub_VeeMatch_src_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/profile/route.ts */ \"(rsc)/./src/app/api/profile/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profile/route\",\n        pathname: \"/api/profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/profile/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\albie\\\\Documents\\\\GitHub\\\\VeeMatch\\\\src\\\\app\\\\api\\\\profile\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_albie_Documents_GitHub_VeeMatch_src_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/profile/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maWxlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9maWxlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvZmlsZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhbGJpZSU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q1ZlZU1hdGNoJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNhbGJpZSU1Q0RvY3VtZW50cyU1Q0dpdEh1YiU1Q1ZlZU1hdGNoJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMrQjtBQUM1RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZlZS1tYXRjaC8/OWY0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxhbGJpZVxcXFxEb2N1bWVudHNcXFxcR2l0SHViXFxcXFZlZU1hdGNoXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHByb2ZpbGVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb2ZpbGUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wcm9maWxlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9maWxlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcYWxiaWVcXFxcRG9jdW1lbnRzXFxcXEdpdEh1YlxcXFxWZWVNYXRjaFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxwcm9maWxlXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcm9maWxlL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/profile/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/profile/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./src/lib/supabase.ts\");\n\n\nasync function GET(request) {\n    const userId = request.nextUrl.searchParams.get(\"userId\");\n    if (!userId) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"User ID is required\"\n        }, {\n            status: 400\n        });\n    }\n    try {\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"profiles\").select(`id, user_id, display_name, age, gender, bio, profile_complete, photos(storage_path, is_primary)`).eq(\"user_id\", userId).maybeSingle();\n        if (error) {\n            console.error(\"Error fetching profile:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to fetch profile\"\n            }, {\n                status: 500\n            });\n        }\n        if (!data) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(null, {\n                status: 404\n            });\n        }\n        // Format photo URLs if any exist\n        let formattedProfile = data;\n        formattedProfile.photo_url = undefined;\n        if (data.photos && data.photos.length > 0) {\n            // Find primary photo or use first one\n            const primaryPhoto = data.photos.find((photo)=>photo.is_primary);\n            const firstPhoto = data.photos[0];\n            const photoPath = primaryPhoto?.storage_path || firstPhoto?.storage_path;\n            if (photoPath) {\n                const { data: urlData } = _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.storage.from(\"photos\").getPublicUrl(photoPath);\n                formattedProfile.photo_url = urlData.publicUrl;\n            }\n        }\n        // Remove photos array from response\n        delete formattedProfile.photos;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(formattedProfile);\n    } catch (error) {\n        console.error(\"Unexpected error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wcm9maWxlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RDtBQUNkO0FBR25DLGVBQWVFLElBQUlDLE9BQW9CO0lBQzVDLE1BQU1DLFNBQVNELFFBQVFFLE9BQU8sQ0FBQ0MsWUFBWSxDQUFDQyxHQUFHLENBQUM7SUFFaEQsSUFBSSxDQUFDSCxRQUFRO1FBQ1gsT0FBT0oscURBQVlBLENBQUNRLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXNCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQzNFO0lBRUEsSUFBSTtRQUNGLE1BQU0sRUFBRUMsSUFBSSxFQUFFRixLQUFLLEVBQUUsR0FBRyxNQUFNUixtREFBUUEsQ0FDbkNXLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsQ0FBQywrRkFBK0YsQ0FBQyxFQUN4R0MsRUFBRSxDQUFDLFdBQVdWLFFBQ2RXLFdBQVc7UUFFZCxJQUFJTixPQUFPO1lBQ1RPLFFBQVFQLEtBQUssQ0FBQywyQkFBMkJBO1lBQ3pDLE9BQU9ULHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBMEIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQy9FO1FBRUEsSUFBSSxDQUFDQyxNQUFNO1lBQ1QsT0FBT1gscURBQVlBLENBQUNRLElBQUksQ0FBQyxNQUFNO2dCQUFFRSxRQUFRO1lBQUk7UUFDL0M7UUFFQSxpQ0FBaUM7UUFDakMsSUFBSU8sbUJBQW1CTjtRQUN2Qk0saUJBQWlCQyxTQUFTLEdBQUdDO1FBRTdCLElBQUlSLEtBQUtTLE1BQU0sSUFBSVQsS0FBS1MsTUFBTSxDQUFDQyxNQUFNLEdBQUcsR0FBRztZQUN6QyxzQ0FBc0M7WUFDdEMsTUFBTUMsZUFBZVgsS0FBS1MsTUFBTSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsUUFBZUEsTUFBTUMsVUFBVTtZQUN0RSxNQUFNQyxhQUFhZixLQUFLUyxNQUFNLENBQUMsRUFBRTtZQUNqQyxNQUFNTyxZQUFZTCxjQUFjTSxnQkFBZ0JGLFlBQVlFO1lBRTVELElBQUlELFdBQVc7Z0JBQ2IsTUFBTSxFQUFFaEIsTUFBTWtCLE9BQU8sRUFBRSxHQUFHNUIsbURBQVFBLENBQUM2QixPQUFPLENBQUNsQixJQUFJLENBQUMsVUFBVW1CLFlBQVksQ0FBQ0o7Z0JBQ3ZFVixpQkFBaUJDLFNBQVMsR0FBR1csUUFBUUcsU0FBUztZQUNoRDtRQUNGO1FBRUEsb0NBQW9DO1FBQ3BDLE9BQU9mLGlCQUFpQkcsTUFBTTtRQUU5QixPQUFPcEIscURBQVlBLENBQUNRLElBQUksQ0FBQ1M7SUFDM0IsRUFBRSxPQUFPUixPQUFPO1FBQ2RPLFFBQVFQLEtBQUssQ0FBQyxxQkFBcUJBO1FBQ25DLE9BQU9ULHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUM3RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmVlLW1hdGNoLy4vc3JjL2FwcC9hcGkvcHJvZmlsZS9yb3V0ZS50cz9mYjZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnQC9saWIvc3VwYWJhc2UnO1xyXG5pbXBvcnQgeyBVc2VyUHJvZmlsZSB9IGZyb20gJ0AvdHlwZXMvcHJvZmlsZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgY29uc3QgdXNlcklkID0gcmVxdWVzdC5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3VzZXJJZCcpO1xyXG4gIFxyXG4gIGlmICghdXNlcklkKSB7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VzZXIgSUQgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgICAuc2VsZWN0KGBpZCwgdXNlcl9pZCwgZGlzcGxheV9uYW1lLCBhZ2UsIGdlbmRlciwgYmlvLCBwcm9maWxlX2NvbXBsZXRlLCBwaG90b3Moc3RvcmFnZV9wYXRoLCBpc19wcmltYXJ5KWApXHJcbiAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZClcclxuICAgICAgLm1heWJlU2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9maWxlOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggcHJvZmlsZScgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihudWxsLCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBGb3JtYXQgcGhvdG8gVVJMcyBpZiBhbnkgZXhpc3RcclxuICAgIGxldCBmb3JtYXR0ZWRQcm9maWxlID0gZGF0YSBhcyB1bmtub3duIGFzIFBhcnRpYWw8VXNlclByb2ZpbGU+O1xyXG4gICAgZm9ybWF0dGVkUHJvZmlsZS5waG90b191cmwgPSB1bmRlZmluZWQ7XHJcbiAgICBcclxuICAgIGlmIChkYXRhLnBob3RvcyAmJiBkYXRhLnBob3Rvcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIEZpbmQgcHJpbWFyeSBwaG90byBvciB1c2UgZmlyc3Qgb25lXHJcbiAgICAgIGNvbnN0IHByaW1hcnlQaG90byA9IGRhdGEucGhvdG9zLmZpbmQoKHBob3RvOiBhbnkpID0+IHBob3RvLmlzX3ByaW1hcnkpO1xyXG4gICAgICBjb25zdCBmaXJzdFBob3RvID0gZGF0YS5waG90b3NbMF07XHJcbiAgICAgIGNvbnN0IHBob3RvUGF0aCA9IHByaW1hcnlQaG90bz8uc3RvcmFnZV9wYXRoIHx8IGZpcnN0UGhvdG8/LnN0b3JhZ2VfcGF0aDtcclxuICAgICAgXHJcbiAgICAgIGlmIChwaG90b1BhdGgpIHtcclxuICAgICAgICBjb25zdCB7IGRhdGE6IHVybERhdGEgfSA9IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbSgncGhvdG9zJykuZ2V0UHVibGljVXJsKHBob3RvUGF0aCk7XHJcbiAgICAgICAgZm9ybWF0dGVkUHJvZmlsZS5waG90b191cmwgPSB1cmxEYXRhLnB1YmxpY1VybDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBSZW1vdmUgcGhvdG9zIGFycmF5IGZyb20gcmVzcG9uc2VcclxuICAgIGRlbGV0ZSBmb3JtYXR0ZWRQcm9maWxlLnBob3RvcztcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGZvcm1hdHRlZFByb2ZpbGUpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic3VwYWJhc2UiLCJHRVQiLCJyZXF1ZXN0IiwidXNlcklkIiwibmV4dFVybCIsInNlYXJjaFBhcmFtcyIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImRhdGEiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJtYXliZVNpbmdsZSIsImNvbnNvbGUiLCJmb3JtYXR0ZWRQcm9maWxlIiwicGhvdG9fdXJsIiwidW5kZWZpbmVkIiwicGhvdG9zIiwibGVuZ3RoIiwicHJpbWFyeVBob3RvIiwiZmluZCIsInBob3RvIiwiaXNfcHJpbWFyeSIsImZpcnN0UGhvdG8iLCJwaG90b1BhdGgiLCJzdG9yYWdlX3BhdGgiLCJ1cmxEYXRhIiwic3RvcmFnZSIsImdldFB1YmxpY1VybCIsInB1YmxpY1VybCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/profile/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   blockUser: () => (/* binding */ blockUser),\n/* harmony export */   createMatch: () => (/* binding */ createMatch),\n/* harmony export */   createProfile: () => (/* binding */ createProfile),\n/* harmony export */   deletePhoto: () => (/* binding */ deletePhoto),\n/* harmony export */   getBlockedUsers: () => (/* binding */ getBlockedUsers),\n/* harmony export */   getDiscoverProfiles: () => (/* binding */ getDiscoverProfiles),\n/* harmony export */   getMatchMessages: () => (/* binding */ getMatchMessages),\n/* harmony export */   getUserMatches: () => (/* binding */ getUserMatches),\n/* harmony export */   getUserNotifications: () => (/* binding */ getUserNotifications),\n/* harmony export */   getUserPhotos: () => (/* binding */ getUserPhotos),\n/* harmony export */   getUserPreferences: () => (/* binding */ getUserPreferences),\n/* harmony export */   getUserProfile: () => (/* binding */ getUserProfile),\n/* harmony export */   likeProfile: () => (/* binding */ likeProfile),\n/* harmony export */   markNotificationAsRead: () => (/* binding */ markNotificationAsRead),\n/* harmony export */   passProfile: () => (/* binding */ passProfile),\n/* harmony export */   sendMessage: () => (/* binding */ sendMessage),\n/* harmony export */   setPrimaryPhoto: () => (/* binding */ setPrimaryPhoto),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   unblockUser: () => (/* binding */ unblockUser),\n/* harmony export */   updateMatchStatus: () => (/* binding */ updateMatchStatus),\n/* harmony export */   updateMessageStatus: () => (/* binding */ updateMessageStatus),\n/* harmony export */   updateProfile: () => (/* binding */ updateProfile),\n/* harmony export */   updateUserPreferences: () => (/* binding */ updateUserPreferences),\n/* harmony export */   uploadPhoto: () => (/* binding */ uploadPhoto)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nif (false) {}\nif (false) {}\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://aangjhraanqtueazxwqa.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFhbmdqaHJhYW5xdHVlYXp4d3FhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDI1NzUxMDIsImV4cCI6MjA1ODE1MTEwMn0.KZ_w94o0DcsoZD7FkEUxOdbyBX-zMGCv7fNh4Buzp7Y\");\n// Helper function to get user's profile\nasync function getUserProfile(userId) {\n    const { data, error } = await supabase.from(\"profiles\").select(\"*\").eq(\"user_id\", userId).single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to create a new profile\nasync function createProfile(profileData) {\n    const { data, error } = await supabase.from(\"profiles\").insert([\n        profileData\n    ]).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to update a profile\nasync function updateProfile(userId, updates) {\n    const { data, error } = await supabase.from(\"profiles\").update(updates).eq(\"user_id\", userId).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to upload a photo\nasync function uploadPhoto(file, profileId) {\n    // First get the profile to get the user ID\n    const { data: profile, error: profileError } = await supabase.from(\"profiles\").select(\"user_id\").eq(\"id\", profileId).single();\n    if (profileError) throw profileError;\n    if (!profile) throw new Error(\"Profile not found\");\n    const fileExt = file.name.split(\".\").pop();\n    // Use the full Clerk user ID for the folder name\n    const fileName = `${profile.user_id}/${Math.random()}.${fileExt}`;\n    // Upload the file\n    const { error: uploadError } = await supabase.storage.from(\"photos\").upload(fileName, file, {\n        cacheControl: \"3600\",\n        upsert: false\n    });\n    if (uploadError) {\n        console.error(\"Upload error:\", uploadError);\n        throw uploadError;\n    }\n    const { data: { publicUrl } } = supabase.storage.from(\"photos\").getPublicUrl(fileName);\n    // Insert the photo record\n    const { data, error } = await supabase.from(\"photos\").insert([\n        {\n            profile_id: profileId,\n            storage_path: fileName,\n            order_index: 0\n        }\n    ]).select().single();\n    if (error) {\n        console.error(\"Database error:\", error);\n        throw error;\n    }\n    return {\n        ...data,\n        url: publicUrl\n    };\n}\n// Helper function to get user's photos\nasync function getUserPhotos(profileId) {\n    if (!profileId) {\n        throw new Error(\"Profile ID is required\");\n    }\n    try {\n        const { data, error } = await supabase.from(\"photos\").select(\"*\").eq(\"profile_id\", profileId).order(\"order_index\");\n        if (error) {\n            console.error(\"Supabase error:\", error);\n            throw error;\n        }\n        if (!data) {\n            return [];\n        }\n        // Add public URLs to each photo\n        return data.map((photo)=>{\n            if (!photo.storage_path) {\n                console.warn(\"Photo missing storage_path:\", photo);\n                return photo;\n            }\n            return {\n                ...photo,\n                url: supabase.storage.from(\"photos\").getPublicUrl(photo.storage_path).data.publicUrl\n            };\n        });\n    } catch (error) {\n        console.error(\"Error in getUserPhotos:\", error);\n        throw error;\n    }\n}\n// Helper function to delete a photo\nasync function deletePhoto(photoId) {\n    const { error } = await supabase.from(\"photos\").delete().eq(\"id\", photoId);\n    if (error) throw error;\n}\n// Helper function to get user's matches\nasync function getUserMatches(profileId) {\n    const { data, error } = await supabase.from(\"matches\").select(`\r\n      *,\r\n      user1:profiles!matches_user1_id_fkey(*),\r\n      user2:profiles!matches_user2_id_fkey(*)\r\n    `).or(`user1_id.eq.${profileId},user2_id.eq.${profileId}`);\n    if (error) throw error;\n    return data;\n}\n// Helper function to create a match\nasync function createMatch(user1Id, user2Id) {\n    const { data, error } = await supabase.from(\"matches\").insert([\n        {\n            user1_id: user1Id,\n            user2_id: user2Id,\n            status: \"pending\"\n        }\n    ]).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to update match status\nasync function updateMatchStatus(matchId, status) {\n    const { data, error } = await supabase.from(\"matches\").update({\n        status\n    }).eq(\"id\", matchId).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to get messages for a match\nasync function getMatchMessages(matchId) {\n    const { data, error } = await supabase.from(\"messages\").select(`\r\n      *,\r\n      sender:profiles!messages_sender_id_fkey(*)\r\n    `).eq(\"match_id\", matchId).order(\"created_at\");\n    if (error) throw error;\n    return data;\n}\n// Helper function to send a message\nasync function sendMessage(matchId, senderId, content) {\n    const { data, error } = await supabase.from(\"messages\").insert([\n        {\n            match_id: matchId,\n            sender_id: senderId,\n            content,\n            status: \"sent\"\n        }\n    ]).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to update message status\nasync function updateMessageStatus(messageId, status) {\n    const { data, error } = await supabase.from(\"messages\").update({\n        status\n    }).eq(\"id\", messageId).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to get user's preferences\nasync function getUserPreferences(profileId) {\n    const { data, error } = await supabase.from(\"user_preferences\").select(\"*\").eq(\"user_id\", profileId).maybeSingle();\n    if (error) throw error;\n    // Return default preferences if none found\n    if (!data) {\n        return {\n            user_id: profileId,\n            min_age: 18,\n            max_age: 99,\n            interested_in: [],\n            max_distance: 100,\n            show_me: true\n        };\n    }\n    return data;\n}\n// Helper function to update user preferences\nasync function updateUserPreferences(profileId, preferences) {\n    // Check if preferences already exist\n    const { data: existingPrefs, error: checkError } = await supabase.from(\"user_preferences\").select(\"user_id\").eq(\"user_id\", profileId).maybeSingle();\n    if (checkError) throw checkError;\n    // If preferences exist, update them\n    if (existingPrefs) {\n        const { data, error } = await supabase.from(\"user_preferences\").update({\n            ...preferences,\n            updated_at: new Date().toISOString()\n        }).eq(\"user_id\", profileId).select().single();\n        if (error) throw error;\n        return data;\n    }\n    // Otherwise create new preferences\n    const { data, error } = await supabase.from(\"user_preferences\").insert([\n        {\n            user_id: profileId,\n            min_age: preferences.min_age || 18,\n            max_age: preferences.max_age || 99,\n            interested_in: preferences.interested_in || [],\n            max_distance: preferences.max_distance || 100,\n            show_me: preferences.show_me !== undefined ? preferences.show_me : true\n        }\n    ]).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to get user's notifications\nasync function getUserNotifications(profileId) {\n    const { data, error } = await supabase.from(\"notifications\").select(\"*\").eq(\"user_id\", profileId).order(\"created_at\", {\n        ascending: false\n    });\n    if (error) throw error;\n    return data;\n}\n// Helper function to mark notification as read\nasync function markNotificationAsRead(notificationId) {\n    const { data, error } = await supabase.from(\"notifications\").update({\n        is_read: true\n    }).eq(\"id\", notificationId).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to block a user\nasync function blockUser(blockerId, blockedId) {\n    const { data, error } = await supabase.from(\"blocked_users\").insert([\n        {\n            blocker_id: blockerId,\n            blocked_id: blockedId\n        }\n    ]).select().single();\n    if (error) throw error;\n    return data;\n}\n// Helper function to unblock a user\nasync function unblockUser(blockerId, blockedId) {\n    const { error } = await supabase.from(\"blocked_users\").delete().eq(\"blocker_id\", blockerId).eq(\"blocked_id\", blockedId);\n    if (error) throw error;\n}\n// Helper function to get blocked users\nasync function getBlockedUsers(profileId) {\n    const { data, error } = await supabase.from(\"blocked_users\").select(`\r\n      *,\r\n      blocked:profiles!blocked_users_blocked_id_fkey(*)\r\n    `).eq(\"blocker_id\", profileId);\n    if (error) throw error;\n    return data;\n}\nasync function setPrimaryPhoto(profileId, photoId) {\n    try {\n        // First, unset any existing primary photo\n        const { error: unsetError } = await supabase.from(\"photos\").update({\n            is_primary: false\n        }).eq(\"profile_id\", profileId);\n        if (unsetError) throw unsetError;\n        // Then set the new primary photo\n        const { error: setError } = await supabase.from(\"photos\").update({\n            is_primary: true\n        }).eq(\"id\", photoId).eq(\"profile_id\", profileId);\n        if (setError) throw setError;\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Error setting primary photo:\", error);\n        throw error;\n    }\n}\n// Helper function to get potential matches (discover)\nasync function getDiscoverProfiles(userId) {\n    // First we need the current user's profile ID\n    const { data: userProfile, error: profileError } = await supabase.from(\"profiles\").select(\"id, gender\").eq(\"user_id\", userId).single();\n    if (profileError) throw profileError;\n    if (!userProfile) throw new Error(\"User profile not found\");\n    // Get user preferences if they exist, otherwise use defaults\n    const { data: preferences, error: prefError } = await supabase.from(\"user_preferences\").select(\"min_age, max_age, interested_in, max_distance\").eq(\"user_id\", userProfile.id).maybeSingle();\n    // Default preferences if none set\n    const minAge = preferences?.min_age || 18;\n    const maxAge = preferences?.max_age || 99;\n    const interestedIn = preferences?.interested_in || null; // null means any gender\n    // Get existing matches and blocks to exclude these users\n    const { data: matchedUsers, error: matchError } = await supabase.from(\"matches\").select(\"user1_id, user2_id\").or(`user1_id.eq.${userProfile.id},user2_id.eq.${userProfile.id}`);\n    if (matchError) throw matchError;\n    // Get blocked users\n    const { data: blockedUsers, error: blockError } = await supabase.from(\"blocked_users\").select(\"blocked_id\").eq(\"blocker_id\", userProfile.id);\n    if (blockError) throw blockError;\n    // Create arrays of users to exclude\n    const excludeIds = new Set();\n    excludeIds.add(userProfile.id); // Exclude self\n    // Add matched users to exclusion list\n    if (matchedUsers && matchedUsers.length > 0) {\n        matchedUsers.forEach((match)=>{\n            if (match.user1_id === userProfile.id) {\n                excludeIds.add(match.user2_id);\n            } else {\n                excludeIds.add(match.user1_id);\n            }\n        });\n    }\n    // Add blocked users to exclusion list\n    if (blockedUsers && blockedUsers.length > 0) {\n        blockedUsers.forEach((block)=>{\n            excludeIds.add(block.blocked_id);\n        });\n    }\n    // Convert exclusion set to array\n    const excludeIdsArray = Array.from(excludeIds);\n    // Build the query\n    let query = supabase.from(\"profiles\").select(`\r\n      *,\r\n      photos(storage_path, is_primary, order_index),\r\n      profile_passions(\r\n        passions(id, name)\r\n      )\r\n    `).eq(\"profile_complete\", true).not(\"id\", \"in\", `(${excludeIdsArray.join(\",\")})`).gte(\"age\", minAge).lte(\"age\", maxAge);\n    // Add gender filter if user has preferences\n    if (interestedIn && interestedIn.length > 0) {\n        query = query.in(\"gender\", interestedIn);\n    }\n    // Limit the number of profiles to return\n    query = query.limit(20);\n    const { data, error } = await query;\n    if (error) throw error;\n    // Transform the data to match our UserProfile interface\n    return data.map((profile)=>{\n        // Get the primary photo if available, otherwise the first photo\n        const primaryPhoto = profile.photos?.find((p)=>p.is_primary);\n        const firstPhoto = profile.photos?.length > 0 ? profile.photos[0] : null;\n        const photoPath = primaryPhoto?.storage_path || firstPhoto?.storage_path;\n        // Get photo URL if there's a path\n        const photoUrl = photoPath ? supabase.storage.from(\"photos\").getPublicUrl(photoPath).data.publicUrl : null;\n        // Transform passions to a simple array of strings\n        const passions = profile.profile_passions?.map((pp)=>pp.passions?.name) || [];\n        return {\n            id: profile.id,\n            user_id: profile.user_id,\n            display_name: profile.display_name,\n            age: profile.age,\n            gender: profile.gender,\n            bio: profile.bio,\n            occupation: profile.occupation,\n            education: profile.education,\n            location_city: profile.location_city,\n            location_country: profile.location_country,\n            photos: photoUrl ? [\n                photoUrl\n            ] : [],\n            relationship_goals: profile.relationship_goals,\n            drinking: profile.drinking,\n            smoking: profile.smoking,\n            children: profile.children,\n            profile_complete: profile.profile_complete,\n            created_at: profile.created_at,\n            updated_at: profile.updated_at,\n            passions\n        };\n    });\n}\n// Helper function to like a profile (create a pending match)\nasync function likeProfile(currentProfileId, targetProfileId) {\n    // Check if there's already a match where the current user is user2\n    const { data: existingMatch, error: matchError } = await supabase.from(\"matches\").select(\"id, status\").eq(\"user1_id\", targetProfileId).eq(\"user2_id\", currentProfileId).maybeSingle();\n    if (matchError) throw matchError;\n    // If there's an existing match (the other user liked us first), update it to matched\n    if (existingMatch) {\n        const { data, error } = await supabase.from(\"matches\").update({\n            status: \"matched\",\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", existingMatch.id).select().single();\n        if (error) throw error;\n        return {\n            ...data,\n            isNewMatch: true\n        };\n    }\n    // Otherwise create a new pending match\n    const { data, error } = await supabase.from(\"matches\").insert([\n        {\n            user1_id: currentProfileId,\n            user2_id: targetProfileId,\n            status: \"pending\"\n        }\n    ]).select().single();\n    if (error) throw error;\n    return {\n        ...data,\n        isNewMatch: false\n    };\n}\n// Helper function to pass (reject) a profile\nasync function passProfile(currentProfileId, targetProfileId) {\n    // Check if there's already a match where the current user is user2\n    const { data: existingMatch, error: matchError } = await supabase.from(\"matches\").select(\"id\").eq(\"user1_id\", targetProfileId).eq(\"user2_id\", currentProfileId).maybeSingle();\n    if (matchError) throw matchError;\n    // If there's an existing match, update it to rejected\n    if (existingMatch) {\n        const { data, error } = await supabase.from(\"matches\").update({\n            status: \"rejected\",\n            updated_at: new Date().toISOString()\n        }).eq(\"id\", existingMatch.id).select().single();\n        if (error) throw error;\n        return data;\n    }\n    // Otherwise create a new rejected match\n    const { data, error } = await supabase.from(\"matches\").insert([\n        {\n            user1_id: currentProfileId,\n            user2_id: targetProfileId,\n            status: \"rejected\"\n        }\n    ]).select().single();\n    if (error) throw error;\n    return data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUlDLE9BQU9DLFdBQVc7UUFBRyxHQUNsRXhFLEVBQUUsQ0FBQyxNQUFNaUosY0FBY25ELEVBQUUsRUFDekIvRixNQUFNLEdBQ05FLE1BQU07UUFFVCxJQUFJSixPQUFPLE1BQU1BO1FBQ2pCLE9BQU9EO0lBQ1Q7SUFFQSx3Q0FBd0M7SUFDeEMsTUFBTSxFQUFFQSxJQUFJLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1KLFNBQzNCSyxJQUFJLENBQUMsV0FDTE0sTUFBTSxDQUFDO1FBQ047WUFDRTBDLFVBQVVpRztZQUNWaEcsVUFBVWlHO1lBQ1ZoRyxRQUFRO1FBQ1Y7S0FDRCxFQUNBakQsTUFBTSxHQUNORSxNQUFNO0lBRVQsSUFBSUosT0FBTyxNQUFNQTtJQUNqQixPQUFPRDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmVlLW1hdGNoLy4vc3JjL2xpYi9zdXBhYmFzZS50cz8wNmUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG5pZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBlbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMJyk7XHJcbn1cclxuaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSkge1xyXG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBlbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVknKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxyXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCxcclxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxyXG4pO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyJ3MgcHJvZmlsZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclByb2ZpbGUodXNlcklkOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgIC5zZWxlY3QoJyonKVxyXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IHByb2ZpbGVcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2ZpbGUocHJvZmlsZURhdGE6IHtcclxuICB1c2VyX2lkOiBzdHJpbmc7XHJcbiAgZGlzcGxheV9uYW1lOiBzdHJpbmc7XHJcbiAgYWdlOiBudW1iZXI7XHJcbiAgZ2VuZGVyOiAnbWFsZScgfCAnZmVtYWxlJyB8ICdub24tYmluYXJ5JyB8ICdvdGhlcic7XHJcbiAgYmlvPzogc3RyaW5nO1xyXG4gIG9jY3VwYXRpb24/OiBzdHJpbmc7XHJcbiAgZWR1Y2F0aW9uPzogc3RyaW5nO1xyXG4gIGxvY2F0aW9uX2NpdHk/OiBzdHJpbmc7XHJcbiAgbG9jYXRpb25fY291bnRyeT86IHN0cmluZztcclxuICByZWxhdGlvbnNoaXBfZ29hbHM/OiAnbG9uZy10ZXJtJyB8ICdjYXN1YWwtZGF0aW5nJyB8ICdmcmllbmRzaGlwJyB8ICdub3Qtc3VyZS15ZXQnO1xyXG4gIGRyaW5raW5nPzogJ25ldmVyJyB8ICdyYXJlbHknIHwgJ3NvY2lhbGx5JyB8ICdyZWd1bGFybHknO1xyXG4gIHNtb2tpbmc/OiAnbmV2ZXInIHwgJ3NvY2lhbGx5JyB8ICdyZWd1bGFybHknO1xyXG4gIGNoaWxkcmVuPzogJ2hhdmUnIHwgJ3dhbnQnIHwgJ2RvblxcJ3Qgd2FudCcgfCAnb3BlbiB0byBpdCc7XHJcbn0pIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgIC5pbnNlcnQoW3Byb2ZpbGVEYXRhXSlcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gdXBkYXRlIGEgcHJvZmlsZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSh1c2VySWQ6IHN0cmluZywgdXBkYXRlczoge1xyXG4gIGRpc3BsYXlfbmFtZT86IHN0cmluZztcclxuICBhZ2U/OiBudW1iZXI7XHJcbiAgZ2VuZGVyPzogJ21hbGUnIHwgJ2ZlbWFsZScgfCAnbm9uLWJpbmFyeScgfCAnb3RoZXInO1xyXG4gIGJpbz86IHN0cmluZztcclxuICBvY2N1cGF0aW9uPzogc3RyaW5nO1xyXG4gIGVkdWNhdGlvbj86IHN0cmluZztcclxuICBsb2NhdGlvbl9jaXR5Pzogc3RyaW5nO1xyXG4gIGxvY2F0aW9uX2NvdW50cnk/OiBzdHJpbmc7XHJcbiAgcmVsYXRpb25zaGlwX2dvYWxzPzogJ2xvbmctdGVybScgfCAnY2FzdWFsLWRhdGluZycgfCAnZnJpZW5kc2hpcCcgfCAnbm90LXN1cmUteWV0JztcclxuICBkcmlua2luZz86ICduZXZlcicgfCAncmFyZWx5JyB8ICdzb2NpYWxseScgfCAncmVndWxhcmx5JztcclxuICBzbW9raW5nPzogJ25ldmVyJyB8ICdzb2NpYWxseScgfCAncmVndWxhcmx5JztcclxuICBjaGlsZHJlbj86ICdoYXZlJyB8ICd3YW50JyB8ICdkb25cXCd0IHdhbnQnIHwgJ29wZW4gdG8gaXQnO1xyXG4gIHBob3Rvcz86IHN0cmluZ1tdO1xyXG4gIHBhc3Npb25zPzogc3RyaW5nW107XHJcbiAgaW50ZXJlc3RlZF9pbj86IHN0cmluZ1tdO1xyXG4gIHByb2ZpbGVfY29tcGxldGU/OiBib29sZWFuO1xyXG59KSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAudXBkYXRlKHVwZGF0ZXMpXHJcbiAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHVwbG9hZCBhIHBob3RvXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWRQaG90byhmaWxlOiBGaWxlLCBwcm9maWxlSWQ6IHN0cmluZykge1xyXG4gIC8vIEZpcnN0IGdldCB0aGUgcHJvZmlsZSB0byBnZXQgdGhlIHVzZXIgSURcclxuICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yOiBwcm9maWxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgncHJvZmlsZXMnKVxyXG4gICAgLnNlbGVjdCgndXNlcl9pZCcpXHJcbiAgICAuZXEoJ2lkJywgcHJvZmlsZUlkKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAocHJvZmlsZUVycm9yKSB0aHJvdyBwcm9maWxlRXJyb3I7XHJcbiAgaWYgKCFwcm9maWxlKSB0aHJvdyBuZXcgRXJyb3IoJ1Byb2ZpbGUgbm90IGZvdW5kJyk7XHJcblxyXG4gIGNvbnN0IGZpbGVFeHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcclxuICAvLyBVc2UgdGhlIGZ1bGwgQ2xlcmsgdXNlciBJRCBmb3IgdGhlIGZvbGRlciBuYW1lXHJcbiAgY29uc3QgZmlsZU5hbWUgPSBgJHtwcm9maWxlLnVzZXJfaWR9LyR7TWF0aC5yYW5kb20oKX0uJHtmaWxlRXh0fWA7XHJcblxyXG4gIC8vIFVwbG9hZCB0aGUgZmlsZVxyXG4gIGNvbnN0IHsgZXJyb3I6IHVwbG9hZEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5zdG9yYWdlXHJcbiAgICAuZnJvbSgncGhvdG9zJylcclxuICAgIC51cGxvYWQoZmlsZU5hbWUsIGZpbGUsIHtcclxuICAgICAgY2FjaGVDb250cm9sOiAnMzYwMCcsXHJcbiAgICAgIHVwc2VydDogZmFsc2VcclxuICAgIH0pO1xyXG5cclxuICBpZiAodXBsb2FkRXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1VwbG9hZCBlcnJvcjonLCB1cGxvYWRFcnJvcik7XHJcbiAgICB0aHJvdyB1cGxvYWRFcnJvcjtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgZGF0YTogeyBwdWJsaWNVcmwgfSB9ID0gc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgLmZyb20oJ3Bob3RvcycpXHJcbiAgICAuZ2V0UHVibGljVXJsKGZpbGVOYW1lKTtcclxuXHJcbiAgLy8gSW5zZXJ0IHRoZSBwaG90byByZWNvcmRcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3Bob3RvcycpXHJcbiAgICAuaW5zZXJ0KFtcclxuICAgICAge1xyXG4gICAgICAgIHByb2ZpbGVfaWQ6IHByb2ZpbGVJZCxcclxuICAgICAgICBzdG9yYWdlX3BhdGg6IGZpbGVOYW1lLFxyXG4gICAgICAgIG9yZGVyX2luZGV4OiAwLFxyXG4gICAgICB9LFxyXG4gICAgXSlcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGVycm9yKTtcclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHsgLi4uZGF0YSwgdXJsOiBwdWJsaWNVcmwgfTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyJ3MgcGhvdG9zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyUGhvdG9zKHByb2ZpbGVJZDogc3RyaW5nKSB7XHJcbiAgaWYgKCFwcm9maWxlSWQpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignUHJvZmlsZSBJRCBpcyByZXF1aXJlZCcpO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwaG90b3MnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLmVxKCdwcm9maWxlX2lkJywgcHJvZmlsZUlkKVxyXG4gICAgICAub3JkZXIoJ29yZGVyX2luZGV4Jyk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFkYXRhKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgcHVibGljIFVSTHMgdG8gZWFjaCBwaG90b1xyXG4gICAgcmV0dXJuIGRhdGEubWFwKHBob3RvID0+IHtcclxuICAgICAgaWYgKCFwaG90by5zdG9yYWdlX3BhdGgpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1Bob3RvIG1pc3Npbmcgc3RvcmFnZV9wYXRoOicsIHBob3RvKTtcclxuICAgICAgICByZXR1cm4gcGhvdG87XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5waG90byxcclxuICAgICAgICB1cmw6IHN1cGFiYXNlLnN0b3JhZ2VcclxuICAgICAgICAgIC5mcm9tKCdwaG90b3MnKVxyXG4gICAgICAgICAgLmdldFB1YmxpY1VybChwaG90by5zdG9yYWdlX3BhdGgpLmRhdGEucHVibGljVXJsXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0VXNlclBob3RvczonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBkZWxldGUgYSBwaG90b1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGhvdG8ocGhvdG9JZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdwaG90b3MnKVxyXG4gICAgLmRlbGV0ZSgpXHJcbiAgICAuZXEoJ2lkJywgcGhvdG9JZCk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdXNlcidzIG1hdGNoZXNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJNYXRjaGVzKHByb2ZpbGVJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdtYXRjaGVzJylcclxuICAgIC5zZWxlY3QoYFxyXG4gICAgICAqLFxyXG4gICAgICB1c2VyMTpwcm9maWxlcyFtYXRjaGVzX3VzZXIxX2lkX2ZrZXkoKiksXHJcbiAgICAgIHVzZXIyOnByb2ZpbGVzIW1hdGNoZXNfdXNlcjJfaWRfZmtleSgqKVxyXG4gICAgYClcclxuICAgIC5vcihgdXNlcjFfaWQuZXEuJHtwcm9maWxlSWR9LHVzZXIyX2lkLmVxLiR7cHJvZmlsZUlkfWApO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgbWF0Y2hcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1hdGNoKHVzZXIxSWQ6IHN0cmluZywgdXNlcjJJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdtYXRjaGVzJylcclxuICAgIC5pbnNlcnQoW1xyXG4gICAgICB7XHJcbiAgICAgICAgdXNlcjFfaWQ6IHVzZXIxSWQsXHJcbiAgICAgICAgdXNlcjJfaWQ6IHVzZXIySWQsXHJcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgIH0sXHJcbiAgICBdKVxyXG4gICAgLnNlbGVjdCgpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byB1cGRhdGUgbWF0Y2ggc3RhdHVzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVNYXRjaFN0YXR1cyhtYXRjaElkOiBzdHJpbmcsIHN0YXR1czogJ3BlbmRpbmcnIHwgJ21hdGNoZWQnIHwgJ3JlamVjdGVkJykge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnbWF0Y2hlcycpXHJcbiAgICAudXBkYXRlKHsgc3RhdHVzIH0pXHJcbiAgICAuZXEoJ2lkJywgbWF0Y2hJZClcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IG1lc3NhZ2VzIGZvciBhIG1hdGNoXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNYXRjaE1lc3NhZ2VzKG1hdGNoSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnbWVzc2FnZXMnKVxyXG4gICAgLnNlbGVjdChgXHJcbiAgICAgICosXHJcbiAgICAgIHNlbmRlcjpwcm9maWxlcyFtZXNzYWdlc19zZW5kZXJfaWRfZmtleSgqKVxyXG4gICAgYClcclxuICAgIC5lcSgnbWF0Y2hfaWQnLCBtYXRjaElkKVxyXG4gICAgLm9yZGVyKCdjcmVhdGVkX2F0Jyk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBzZW5kIGEgbWVzc2FnZVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZE1lc3NhZ2UobWF0Y2hJZDogc3RyaW5nLCBzZW5kZXJJZDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ21lc3NhZ2VzJylcclxuICAgIC5pbnNlcnQoW1xyXG4gICAgICB7XHJcbiAgICAgICAgbWF0Y2hfaWQ6IG1hdGNoSWQsXHJcbiAgICAgICAgc2VuZGVyX2lkOiBzZW5kZXJJZCxcclxuICAgICAgICBjb250ZW50LFxyXG4gICAgICAgIHN0YXR1czogJ3NlbnQnLFxyXG4gICAgICB9LFxyXG4gICAgXSlcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gdXBkYXRlIG1lc3NhZ2Ugc3RhdHVzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlU3RhdHVzKG1lc3NhZ2VJZDogc3RyaW5nLCBzdGF0dXM6ICdzZW50JyB8ICdkZWxpdmVyZWQnIHwgJ3JlYWQnKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdtZXNzYWdlcycpXHJcbiAgICAudXBkYXRlKHsgc3RhdHVzIH0pXHJcbiAgICAuZXEoJ2lkJywgbWVzc2FnZUlkKVxyXG4gICAgLnNlbGVjdCgpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdXNlcidzIHByZWZlcmVuY2VzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyUHJlZmVyZW5jZXMocHJvZmlsZUlkOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3VzZXJfcHJlZmVyZW5jZXMnKVxyXG4gICAgLnNlbGVjdCgnKicpXHJcbiAgICAuZXEoJ3VzZXJfaWQnLCBwcm9maWxlSWQpXHJcbiAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuXHJcbiAgLy8gUmV0dXJuIGRlZmF1bHQgcHJlZmVyZW5jZXMgaWYgbm9uZSBmb3VuZFxyXG4gIGlmICghZGF0YSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlcl9pZDogcHJvZmlsZUlkLFxyXG4gICAgICBtaW5fYWdlOiAxOCxcclxuICAgICAgbWF4X2FnZTogOTksXHJcbiAgICAgIGludGVyZXN0ZWRfaW46IFtdLFxyXG4gICAgICBtYXhfZGlzdGFuY2U6IDEwMCxcclxuICAgICAgc2hvd19tZTogdHJ1ZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gdXBkYXRlIHVzZXIgcHJlZmVyZW5jZXNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcmVmZXJlbmNlcyhwcm9maWxlSWQ6IHN0cmluZywgcHJlZmVyZW5jZXM6IHtcclxuICBtaW5fYWdlPzogbnVtYmVyO1xyXG4gIG1heF9hZ2U/OiBudW1iZXI7XHJcbiAgaW50ZXJlc3RlZF9pbj86IHN0cmluZ1tdO1xyXG4gIG1heF9kaXN0YW5jZT86IG51bWJlcjtcclxuICBzaG93X21lPzogYm9vbGVhbjtcclxufSkge1xyXG4gIC8vIENoZWNrIGlmIHByZWZlcmVuY2VzIGFscmVhZHkgZXhpc3RcclxuICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nUHJlZnMsIGVycm9yOiBjaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3VzZXJfcHJlZmVyZW5jZXMnKVxyXG4gICAgLnNlbGVjdCgndXNlcl9pZCcpXHJcbiAgICAuZXEoJ3VzZXJfaWQnLCBwcm9maWxlSWQpXHJcbiAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgaWYgKGNoZWNrRXJyb3IpIHRocm93IGNoZWNrRXJyb3I7XHJcblxyXG4gIC8vIElmIHByZWZlcmVuY2VzIGV4aXN0LCB1cGRhdGUgdGhlbVxyXG4gIGlmIChleGlzdGluZ1ByZWZzKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndXNlcl9wcmVmZXJlbmNlcycpXHJcbiAgICAgIC51cGRhdGUoe1xyXG4gICAgICAgIC4uLnByZWZlcmVuY2VzLFxyXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9KVxyXG4gICAgICAuZXEoJ3VzZXJfaWQnLCBwcm9maWxlSWQpXHJcbiAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgLy8gT3RoZXJ3aXNlIGNyZWF0ZSBuZXcgcHJlZmVyZW5jZXNcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3VzZXJfcHJlZmVyZW5jZXMnKVxyXG4gICAgLmluc2VydChbXHJcbiAgICAgIHtcclxuICAgICAgICB1c2VyX2lkOiBwcm9maWxlSWQsXHJcbiAgICAgICAgbWluX2FnZTogcHJlZmVyZW5jZXMubWluX2FnZSB8fCAxOCxcclxuICAgICAgICBtYXhfYWdlOiBwcmVmZXJlbmNlcy5tYXhfYWdlIHx8IDk5LFxyXG4gICAgICAgIGludGVyZXN0ZWRfaW46IHByZWZlcmVuY2VzLmludGVyZXN0ZWRfaW4gfHwgW10sXHJcbiAgICAgICAgbWF4X2Rpc3RhbmNlOiBwcmVmZXJlbmNlcy5tYXhfZGlzdGFuY2UgfHwgMTAwLFxyXG4gICAgICAgIHNob3dfbWU6IHByZWZlcmVuY2VzLnNob3dfbWUgIT09IHVuZGVmaW5lZCA/IHByZWZlcmVuY2VzLnNob3dfbWUgOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIF0pXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyJ3Mgbm90aWZpY2F0aW9uc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlck5vdGlmaWNhdGlvbnMocHJvZmlsZUlkOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgLnNlbGVjdCgnKicpXHJcbiAgICAuZXEoJ3VzZXJfaWQnLCBwcm9maWxlSWQpXHJcbiAgICAub3JkZXIoJ2NyZWF0ZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBtYXJrIG5vdGlmaWNhdGlvbiBhcyByZWFkXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXJrTm90aWZpY2F0aW9uQXNSZWFkKG5vdGlmaWNhdGlvbklkOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ25vdGlmaWNhdGlvbnMnKVxyXG4gICAgLnVwZGF0ZSh7IGlzX3JlYWQ6IHRydWUgfSlcclxuICAgIC5lcSgnaWQnLCBub3RpZmljYXRpb25JZClcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gYmxvY2sgYSB1c2VyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBibG9ja1VzZXIoYmxvY2tlcklkOiBzdHJpbmcsIGJsb2NrZWRJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdibG9ja2VkX3VzZXJzJylcclxuICAgIC5pbnNlcnQoW1xyXG4gICAgICB7XHJcbiAgICAgICAgYmxvY2tlcl9pZDogYmxvY2tlcklkLFxyXG4gICAgICAgIGJsb2NrZWRfaWQ6IGJsb2NrZWRJZCxcclxuICAgICAgfSxcclxuICAgIF0pXHJcbiAgICAuc2VsZWN0KClcclxuICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHVuYmxvY2sgYSB1c2VyXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1bmJsb2NrVXNlcihibG9ja2VySWQ6IHN0cmluZywgYmxvY2tlZElkOiBzdHJpbmcpIHtcclxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2Jsb2NrZWRfdXNlcnMnKVxyXG4gICAgLmRlbGV0ZSgpXHJcbiAgICAuZXEoJ2Jsb2NrZXJfaWQnLCBibG9ja2VySWQpXHJcbiAgICAuZXEoJ2Jsb2NrZWRfaWQnLCBibG9ja2VkSWQpO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGJsb2NrZWQgdXNlcnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJsb2NrZWRVc2Vycyhwcm9maWxlSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnYmxvY2tlZF91c2VycycpXHJcbiAgICAuc2VsZWN0KGBcclxuICAgICAgKixcclxuICAgICAgYmxvY2tlZDpwcm9maWxlcyFibG9ja2VkX3VzZXJzX2Jsb2NrZWRfaWRfZmtleSgqKVxyXG4gICAgYClcclxuICAgIC5lcSgnYmxvY2tlcl9pZCcsIHByb2ZpbGVJZCk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRQcmltYXJ5UGhvdG8ocHJvZmlsZUlkOiBzdHJpbmcsIHBob3RvSWQ6IHN0cmluZykge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGaXJzdCwgdW5zZXQgYW55IGV4aXN0aW5nIHByaW1hcnkgcGhvdG9cclxuICAgIGNvbnN0IHsgZXJyb3I6IHVuc2V0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdwaG90b3MnKVxyXG4gICAgICAudXBkYXRlKHsgaXNfcHJpbWFyeTogZmFsc2UgfSlcclxuICAgICAgLmVxKCdwcm9maWxlX2lkJywgcHJvZmlsZUlkKTtcclxuXHJcbiAgICBpZiAodW5zZXRFcnJvcikgdGhyb3cgdW5zZXRFcnJvcjtcclxuXHJcbiAgICAvLyBUaGVuIHNldCB0aGUgbmV3IHByaW1hcnkgcGhvdG9cclxuICAgIGNvbnN0IHsgZXJyb3I6IHNldEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncGhvdG9zJylcclxuICAgICAgLnVwZGF0ZSh7IGlzX3ByaW1hcnk6IHRydWUgfSlcclxuICAgICAgLmVxKCdpZCcsIHBob3RvSWQpXHJcbiAgICAgIC5lcSgncHJvZmlsZV9pZCcsIHByb2ZpbGVJZCk7XHJcblxyXG4gICAgaWYgKHNldEVycm9yKSB0aHJvdyBzZXRFcnJvcjtcclxuXHJcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgcHJpbWFyeSBwaG90bzonLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgcG90ZW50aWFsIG1hdGNoZXMgKGRpc2NvdmVyKVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RGlzY292ZXJQcm9maWxlcyh1c2VySWQ6IHN0cmluZykge1xyXG4gIC8vIEZpcnN0IHdlIG5lZWQgdGhlIGN1cnJlbnQgdXNlcidzIHByb2ZpbGUgSURcclxuICBjb25zdCB7IGRhdGE6IHVzZXJQcm9maWxlLCBlcnJvcjogcHJvZmlsZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3Byb2ZpbGVzJylcclxuICAgIC5zZWxlY3QoJ2lkLCBnZW5kZXInKVxyXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAocHJvZmlsZUVycm9yKSB0aHJvdyBwcm9maWxlRXJyb3I7XHJcbiAgaWYgKCF1c2VyUHJvZmlsZSkgdGhyb3cgbmV3IEVycm9yKCdVc2VyIHByb2ZpbGUgbm90IGZvdW5kJyk7XHJcblxyXG4gIC8vIEdldCB1c2VyIHByZWZlcmVuY2VzIGlmIHRoZXkgZXhpc3QsIG90aGVyd2lzZSB1c2UgZGVmYXVsdHNcclxuICBjb25zdCB7IGRhdGE6IHByZWZlcmVuY2VzLCBlcnJvcjogcHJlZkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ3VzZXJfcHJlZmVyZW5jZXMnKVxyXG4gICAgLnNlbGVjdCgnbWluX2FnZSwgbWF4X2FnZSwgaW50ZXJlc3RlZF9pbiwgbWF4X2Rpc3RhbmNlJylcclxuICAgIC5lcSgndXNlcl9pZCcsIHVzZXJQcm9maWxlLmlkKVxyXG4gICAgLm1heWJlU2luZ2xlKCk7XHJcblxyXG4gIC8vIERlZmF1bHQgcHJlZmVyZW5jZXMgaWYgbm9uZSBzZXRcclxuICBjb25zdCBtaW5BZ2UgPSBwcmVmZXJlbmNlcz8ubWluX2FnZSB8fCAxODtcclxuICBjb25zdCBtYXhBZ2UgPSBwcmVmZXJlbmNlcz8ubWF4X2FnZSB8fCA5OTtcclxuICBjb25zdCBpbnRlcmVzdGVkSW4gPSBwcmVmZXJlbmNlcz8uaW50ZXJlc3RlZF9pbiB8fCBudWxsOyAvLyBudWxsIG1lYW5zIGFueSBnZW5kZXJcclxuXHJcbiAgLy8gR2V0IGV4aXN0aW5nIG1hdGNoZXMgYW5kIGJsb2NrcyB0byBleGNsdWRlIHRoZXNlIHVzZXJzXHJcbiAgY29uc3QgeyBkYXRhOiBtYXRjaGVkVXNlcnMsIGVycm9yOiBtYXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ21hdGNoZXMnKVxyXG4gICAgLnNlbGVjdCgndXNlcjFfaWQsIHVzZXIyX2lkJylcclxuICAgIC5vcihgdXNlcjFfaWQuZXEuJHt1c2VyUHJvZmlsZS5pZH0sdXNlcjJfaWQuZXEuJHt1c2VyUHJvZmlsZS5pZH1gKTtcclxuXHJcbiAgaWYgKG1hdGNoRXJyb3IpIHRocm93IG1hdGNoRXJyb3I7XHJcblxyXG4gIC8vIEdldCBibG9ja2VkIHVzZXJzXHJcbiAgY29uc3QgeyBkYXRhOiBibG9ja2VkVXNlcnMsIGVycm9yOiBibG9ja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ2Jsb2NrZWRfdXNlcnMnKVxyXG4gICAgLnNlbGVjdCgnYmxvY2tlZF9pZCcpXHJcbiAgICAuZXEoJ2Jsb2NrZXJfaWQnLCB1c2VyUHJvZmlsZS5pZCk7XHJcblxyXG4gIGlmIChibG9ja0Vycm9yKSB0aHJvdyBibG9ja0Vycm9yO1xyXG5cclxuICAvLyBDcmVhdGUgYXJyYXlzIG9mIHVzZXJzIHRvIGV4Y2x1ZGVcclxuICBjb25zdCBleGNsdWRlSWRzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgZXhjbHVkZUlkcy5hZGQodXNlclByb2ZpbGUuaWQpOyAvLyBFeGNsdWRlIHNlbGZcclxuXHJcbiAgLy8gQWRkIG1hdGNoZWQgdXNlcnMgdG8gZXhjbHVzaW9uIGxpc3RcclxuICBpZiAobWF0Y2hlZFVzZXJzICYmIG1hdGNoZWRVc2Vycy5sZW5ndGggPiAwKSB7XHJcbiAgICBtYXRjaGVkVXNlcnMuZm9yRWFjaChtYXRjaCA9PiB7XHJcbiAgICAgIGlmIChtYXRjaC51c2VyMV9pZCA9PT0gdXNlclByb2ZpbGUuaWQpIHtcclxuICAgICAgICBleGNsdWRlSWRzLmFkZChtYXRjaC51c2VyMl9pZCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZXhjbHVkZUlkcy5hZGQobWF0Y2gudXNlcjFfaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIEFkZCBibG9ja2VkIHVzZXJzIHRvIGV4Y2x1c2lvbiBsaXN0XHJcbiAgaWYgKGJsb2NrZWRVc2VycyAmJiBibG9ja2VkVXNlcnMubGVuZ3RoID4gMCkge1xyXG4gICAgYmxvY2tlZFVzZXJzLmZvckVhY2goYmxvY2sgPT4ge1xyXG4gICAgICBleGNsdWRlSWRzLmFkZChibG9jay5ibG9ja2VkX2lkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gQ29udmVydCBleGNsdXNpb24gc2V0IHRvIGFycmF5XHJcbiAgY29uc3QgZXhjbHVkZUlkc0FycmF5ID0gQXJyYXkuZnJvbShleGNsdWRlSWRzKTtcclxuXHJcbiAgLy8gQnVpbGQgdGhlIHF1ZXJ5XHJcbiAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcclxuICAgIC5mcm9tKCdwcm9maWxlcycpXHJcbiAgICAuc2VsZWN0KGBcclxuICAgICAgKixcclxuICAgICAgcGhvdG9zKHN0b3JhZ2VfcGF0aCwgaXNfcHJpbWFyeSwgb3JkZXJfaW5kZXgpLFxyXG4gICAgICBwcm9maWxlX3Bhc3Npb25zKFxyXG4gICAgICAgIHBhc3Npb25zKGlkLCBuYW1lKVxyXG4gICAgICApXHJcbiAgICBgKVxyXG4gICAgLmVxKCdwcm9maWxlX2NvbXBsZXRlJywgdHJ1ZSlcclxuICAgIC5ub3QoJ2lkJywgJ2luJywgYCgke2V4Y2x1ZGVJZHNBcnJheS5qb2luKCcsJyl9KWApXHJcbiAgICAuZ3RlKCdhZ2UnLCBtaW5BZ2UpXHJcbiAgICAubHRlKCdhZ2UnLCBtYXhBZ2UpO1xyXG5cclxuICAvLyBBZGQgZ2VuZGVyIGZpbHRlciBpZiB1c2VyIGhhcyBwcmVmZXJlbmNlc1xyXG4gIGlmIChpbnRlcmVzdGVkSW4gJiYgaW50ZXJlc3RlZEluLmxlbmd0aCA+IDApIHtcclxuICAgIHF1ZXJ5ID0gcXVlcnkuaW4oJ2dlbmRlcicsIGludGVyZXN0ZWRJbik7XHJcbiAgfVxyXG5cclxuICAvLyBMaW1pdCB0aGUgbnVtYmVyIG9mIHByb2ZpbGVzIHRvIHJldHVyblxyXG4gIHF1ZXJ5ID0gcXVlcnkubGltaXQoMjApO1xyXG5cclxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBxdWVyeTtcclxuXHJcbiAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuXHJcbiAgLy8gVHJhbnNmb3JtIHRoZSBkYXRhIHRvIG1hdGNoIG91ciBVc2VyUHJvZmlsZSBpbnRlcmZhY2VcclxuICByZXR1cm4gZGF0YS5tYXAoKHByb2ZpbGU6IGFueSkgPT4ge1xyXG4gICAgLy8gR2V0IHRoZSBwcmltYXJ5IHBob3RvIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBmaXJzdCBwaG90b1xyXG4gICAgY29uc3QgcHJpbWFyeVBob3RvID0gcHJvZmlsZS5waG90b3M/LmZpbmQoKHA6IGFueSkgPT4gcC5pc19wcmltYXJ5KTtcclxuICAgIGNvbnN0IGZpcnN0UGhvdG8gPSBwcm9maWxlLnBob3Rvcz8ubGVuZ3RoID4gMCA/IHByb2ZpbGUucGhvdG9zWzBdIDogbnVsbDtcclxuICAgIGNvbnN0IHBob3RvUGF0aCA9IHByaW1hcnlQaG90bz8uc3RvcmFnZV9wYXRoIHx8IGZpcnN0UGhvdG8/LnN0b3JhZ2VfcGF0aDtcclxuICAgIFxyXG4gICAgLy8gR2V0IHBob3RvIFVSTCBpZiB0aGVyZSdzIGEgcGF0aFxyXG4gICAgY29uc3QgcGhvdG9VcmwgPSBwaG90b1BhdGggXHJcbiAgICAgID8gc3VwYWJhc2Uuc3RvcmFnZS5mcm9tKCdwaG90b3MnKS5nZXRQdWJsaWNVcmwocGhvdG9QYXRoKS5kYXRhLnB1YmxpY1VybCBcclxuICAgICAgOiBudWxsO1xyXG5cclxuICAgIC8vIFRyYW5zZm9ybSBwYXNzaW9ucyB0byBhIHNpbXBsZSBhcnJheSBvZiBzdHJpbmdzXHJcbiAgICBjb25zdCBwYXNzaW9ucyA9IHByb2ZpbGUucHJvZmlsZV9wYXNzaW9ucz8ubWFwKChwcDogYW55KSA9PiBwcC5wYXNzaW9ucz8ubmFtZSkgfHwgW107XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaWQ6IHByb2ZpbGUuaWQsXHJcbiAgICAgIHVzZXJfaWQ6IHByb2ZpbGUudXNlcl9pZCxcclxuICAgICAgZGlzcGxheV9uYW1lOiBwcm9maWxlLmRpc3BsYXlfbmFtZSxcclxuICAgICAgYWdlOiBwcm9maWxlLmFnZSxcclxuICAgICAgZ2VuZGVyOiBwcm9maWxlLmdlbmRlcixcclxuICAgICAgYmlvOiBwcm9maWxlLmJpbyxcclxuICAgICAgb2NjdXBhdGlvbjogcHJvZmlsZS5vY2N1cGF0aW9uLFxyXG4gICAgICBlZHVjYXRpb246IHByb2ZpbGUuZWR1Y2F0aW9uLFxyXG4gICAgICBsb2NhdGlvbl9jaXR5OiBwcm9maWxlLmxvY2F0aW9uX2NpdHksXHJcbiAgICAgIGxvY2F0aW9uX2NvdW50cnk6IHByb2ZpbGUubG9jYXRpb25fY291bnRyeSxcclxuICAgICAgcGhvdG9zOiBwaG90b1VybCA/IFtwaG90b1VybF0gOiBbXSxcclxuICAgICAgcmVsYXRpb25zaGlwX2dvYWxzOiBwcm9maWxlLnJlbGF0aW9uc2hpcF9nb2FscyxcclxuICAgICAgZHJpbmtpbmc6IHByb2ZpbGUuZHJpbmtpbmcsXHJcbiAgICAgIHNtb2tpbmc6IHByb2ZpbGUuc21va2luZyxcclxuICAgICAgY2hpbGRyZW46IHByb2ZpbGUuY2hpbGRyZW4sXHJcbiAgICAgIHByb2ZpbGVfY29tcGxldGU6IHByb2ZpbGUucHJvZmlsZV9jb21wbGV0ZSxcclxuICAgICAgY3JlYXRlZF9hdDogcHJvZmlsZS5jcmVhdGVkX2F0LFxyXG4gICAgICB1cGRhdGVkX2F0OiBwcm9maWxlLnVwZGF0ZWRfYXQsXHJcbiAgICAgIHBhc3Npb25zLFxyXG4gICAgfTtcclxuICB9KTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGxpa2UgYSBwcm9maWxlIChjcmVhdGUgYSBwZW5kaW5nIG1hdGNoKVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlrZVByb2ZpbGUoY3VycmVudFByb2ZpbGVJZDogc3RyaW5nLCB0YXJnZXRQcm9maWxlSWQ6IHN0cmluZykge1xyXG4gIC8vIENoZWNrIGlmIHRoZXJlJ3MgYWxyZWFkeSBhIG1hdGNoIHdoZXJlIHRoZSBjdXJyZW50IHVzZXIgaXMgdXNlcjJcclxuICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nTWF0Y2gsIGVycm9yOiBtYXRjaEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgLmZyb20oJ21hdGNoZXMnKVxyXG4gICAgLnNlbGVjdCgnaWQsIHN0YXR1cycpXHJcbiAgICAuZXEoJ3VzZXIxX2lkJywgdGFyZ2V0UHJvZmlsZUlkKVxyXG4gICAgLmVxKCd1c2VyMl9pZCcsIGN1cnJlbnRQcm9maWxlSWQpXHJcbiAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgaWYgKG1hdGNoRXJyb3IpIHRocm93IG1hdGNoRXJyb3I7XHJcblxyXG4gIC8vIElmIHRoZXJlJ3MgYW4gZXhpc3RpbmcgbWF0Y2ggKHRoZSBvdGhlciB1c2VyIGxpa2VkIHVzIGZpcnN0KSwgdXBkYXRlIGl0IHRvIG1hdGNoZWRcclxuICBpZiAoZXhpc3RpbmdNYXRjaCkge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21hdGNoZXMnKVxyXG4gICAgICAudXBkYXRlKHsgc3RhdHVzOiAnbWF0Y2hlZCcsIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxyXG4gICAgICAuZXEoJ2lkJywgZXhpc3RpbmdNYXRjaC5pZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgcmV0dXJuIHsgLi4uZGF0YSwgaXNOZXdNYXRjaDogdHJ1ZSB9O1xyXG4gIH1cclxuXHJcbiAgLy8gT3RoZXJ3aXNlIGNyZWF0ZSBhIG5ldyBwZW5kaW5nIG1hdGNoXHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdtYXRjaGVzJylcclxuICAgIC5pbnNlcnQoW1xyXG4gICAgICB7XHJcbiAgICAgICAgdXNlcjFfaWQ6IGN1cnJlbnRQcm9maWxlSWQsXHJcbiAgICAgICAgdXNlcjJfaWQ6IHRhcmdldFByb2ZpbGVJZCxcclxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJ1xyXG4gICAgICB9XHJcbiAgICBdKVxyXG4gICAgLnNlbGVjdCgpXHJcbiAgICAuc2luZ2xlKCk7XHJcblxyXG4gIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgcmV0dXJuIHsgLi4uZGF0YSwgaXNOZXdNYXRjaDogZmFsc2UgfTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHBhc3MgKHJlamVjdCkgYSBwcm9maWxlXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXNzUHJvZmlsZShjdXJyZW50UHJvZmlsZUlkOiBzdHJpbmcsIHRhcmdldFByb2ZpbGVJZDogc3RyaW5nKSB7XHJcbiAgLy8gQ2hlY2sgaWYgdGhlcmUncyBhbHJlYWR5IGEgbWF0Y2ggd2hlcmUgdGhlIGN1cnJlbnQgdXNlciBpcyB1c2VyMlxyXG4gIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdNYXRjaCwgZXJyb3I6IG1hdGNoRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAuZnJvbSgnbWF0Y2hlcycpXHJcbiAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAuZXEoJ3VzZXIxX2lkJywgdGFyZ2V0UHJvZmlsZUlkKVxyXG4gICAgLmVxKCd1c2VyMl9pZCcsIGN1cnJlbnRQcm9maWxlSWQpXHJcbiAgICAubWF5YmVTaW5nbGUoKTtcclxuXHJcbiAgaWYgKG1hdGNoRXJyb3IpIHRocm93IG1hdGNoRXJyb3I7XHJcblxyXG4gIC8vIElmIHRoZXJlJ3MgYW4gZXhpc3RpbmcgbWF0Y2gsIHVwZGF0ZSBpdCB0byByZWplY3RlZFxyXG4gIGlmIChleGlzdGluZ01hdGNoKSB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnbWF0Y2hlcycpXHJcbiAgICAgIC51cGRhdGUoeyBzdGF0dXM6ICdyZWplY3RlZCcsIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxyXG4gICAgICAuZXEoJ2lkJywgZXhpc3RpbmdNYXRjaC5pZClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICAvLyBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IHJlamVjdGVkIG1hdGNoXHJcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgIC5mcm9tKCdtYXRjaGVzJylcclxuICAgIC5pbnNlcnQoW1xyXG4gICAgICB7XHJcbiAgICAgICAgdXNlcjFfaWQ6IGN1cnJlbnRQcm9maWxlSWQsXHJcbiAgICAgICAgdXNlcjJfaWQ6IHRhcmdldFByb2ZpbGVJZCxcclxuICAgICAgICBzdGF0dXM6ICdyZWplY3RlZCdcclxuICAgICAgfVxyXG4gICAgXSlcclxuICAgIC5zZWxlY3QoKVxyXG4gICAgLnNpbmdsZSgpO1xyXG5cclxuICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIHJldHVybiBkYXRhO1xyXG59ICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiRXJyb3IiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiZ2V0VXNlclByb2ZpbGUiLCJ1c2VySWQiLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJjcmVhdGVQcm9maWxlIiwicHJvZmlsZURhdGEiLCJpbnNlcnQiLCJ1cGRhdGVQcm9maWxlIiwidXBkYXRlcyIsInVwZGF0ZSIsInVwbG9hZFBob3RvIiwiZmlsZSIsInByb2ZpbGVJZCIsInByb2ZpbGUiLCJwcm9maWxlRXJyb3IiLCJmaWxlRXh0IiwibmFtZSIsInNwbGl0IiwicG9wIiwiZmlsZU5hbWUiLCJ1c2VyX2lkIiwiTWF0aCIsInJhbmRvbSIsInVwbG9hZEVycm9yIiwic3RvcmFnZSIsInVwbG9hZCIsImNhY2hlQ29udHJvbCIsInVwc2VydCIsImNvbnNvbGUiLCJwdWJsaWNVcmwiLCJnZXRQdWJsaWNVcmwiLCJwcm9maWxlX2lkIiwic3RvcmFnZV9wYXRoIiwib3JkZXJfaW5kZXgiLCJ1cmwiLCJnZXRVc2VyUGhvdG9zIiwib3JkZXIiLCJtYXAiLCJwaG90byIsIndhcm4iLCJkZWxldGVQaG90byIsInBob3RvSWQiLCJkZWxldGUiLCJnZXRVc2VyTWF0Y2hlcyIsIm9yIiwiY3JlYXRlTWF0Y2giLCJ1c2VyMUlkIiwidXNlcjJJZCIsInVzZXIxX2lkIiwidXNlcjJfaWQiLCJzdGF0dXMiLCJ1cGRhdGVNYXRjaFN0YXR1cyIsIm1hdGNoSWQiLCJnZXRNYXRjaE1lc3NhZ2VzIiwic2VuZE1lc3NhZ2UiLCJzZW5kZXJJZCIsImNvbnRlbnQiLCJtYXRjaF9pZCIsInNlbmRlcl9pZCIsInVwZGF0ZU1lc3NhZ2VTdGF0dXMiLCJtZXNzYWdlSWQiLCJnZXRVc2VyUHJlZmVyZW5jZXMiLCJtYXliZVNpbmdsZSIsIm1pbl9hZ2UiLCJtYXhfYWdlIiwiaW50ZXJlc3RlZF9pbiIsIm1heF9kaXN0YW5jZSIsInNob3dfbWUiLCJ1cGRhdGVVc2VyUHJlZmVyZW5jZXMiLCJwcmVmZXJlbmNlcyIsImV4aXN0aW5nUHJlZnMiLCJjaGVja0Vycm9yIiwidXBkYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVuZGVmaW5lZCIsImdldFVzZXJOb3RpZmljYXRpb25zIiwiYXNjZW5kaW5nIiwibWFya05vdGlmaWNhdGlvbkFzUmVhZCIsIm5vdGlmaWNhdGlvbklkIiwiaXNfcmVhZCIsImJsb2NrVXNlciIsImJsb2NrZXJJZCIsImJsb2NrZWRJZCIsImJsb2NrZXJfaWQiLCJibG9ja2VkX2lkIiwidW5ibG9ja1VzZXIiLCJnZXRCbG9ja2VkVXNlcnMiLCJzZXRQcmltYXJ5UGhvdG8iLCJ1bnNldEVycm9yIiwiaXNfcHJpbWFyeSIsInNldEVycm9yIiwic3VjY2VzcyIsImdldERpc2NvdmVyUHJvZmlsZXMiLCJ1c2VyUHJvZmlsZSIsInByZWZFcnJvciIsImlkIiwibWluQWdlIiwibWF4QWdlIiwiaW50ZXJlc3RlZEluIiwibWF0Y2hlZFVzZXJzIiwibWF0Y2hFcnJvciIsImJsb2NrZWRVc2VycyIsImJsb2NrRXJyb3IiLCJleGNsdWRlSWRzIiwiU2V0IiwiYWRkIiwibGVuZ3RoIiwiZm9yRWFjaCIsIm1hdGNoIiwiYmxvY2siLCJleGNsdWRlSWRzQXJyYXkiLCJBcnJheSIsInF1ZXJ5Iiwibm90Iiwiam9pbiIsImd0ZSIsImx0ZSIsImluIiwibGltaXQiLCJwcmltYXJ5UGhvdG8iLCJwaG90b3MiLCJmaW5kIiwicCIsImZpcnN0UGhvdG8iLCJwaG90b1BhdGgiLCJwaG90b1VybCIsInBhc3Npb25zIiwicHJvZmlsZV9wYXNzaW9ucyIsInBwIiwiZGlzcGxheV9uYW1lIiwiYWdlIiwiZ2VuZGVyIiwiYmlvIiwib2NjdXBhdGlvbiIsImVkdWNhdGlvbiIsImxvY2F0aW9uX2NpdHkiLCJsb2NhdGlvbl9jb3VudHJ5IiwicmVsYXRpb25zaGlwX2dvYWxzIiwiZHJpbmtpbmciLCJzbW9raW5nIiwiY2hpbGRyZW4iLCJwcm9maWxlX2NvbXBsZXRlIiwiY3JlYXRlZF9hdCIsImxpa2VQcm9maWxlIiwiY3VycmVudFByb2ZpbGVJZCIsInRhcmdldFByb2ZpbGVJZCIsImV4aXN0aW5nTWF0Y2giLCJpc05ld01hdGNoIiwicGFzc1Byb2ZpbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Calbie%5CDocuments%5CGitHub%5CVeeMatch&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();